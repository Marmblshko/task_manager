<main class="container mx-auto mt-4">
  <%= link_to sanitize("&larr; Back to tasks"), tasks_path, class: "text-blue-500 mb-4 block" %>
  <div class="bg-blue-100 p-4 rounded-lg shadow-md">
    <div class="header mb-4">
      <h1 class="text-3xl font-bold mb-2"><%= @task.title %></h1>
      <span>Project: <%= link_to @task.project.title, project_path(@task.project), data: { turbo_frame: "_top" }, class: "text-blue-500 font-semibold text-xl mb-2 inline-block" %></span>
      <p class="text-gray-700 mb-4">Description: <%= @task.description %></p>
      <p class="text-gray-700 mb-4">Status: <%= @task.status %></p>
      <div class="flex flex-col space-x-2">
        <% if @task.report.present? %>
          <p class="text-red-700 mb-4 block">Report doesn't work correctly!!! After creating, you must refresh the page.</p>
          <p class="text-red-700 mb-4 block">When edit it is broken more.</p>
          <%= turbo_frame_tag "report" do %>
            <%= render "reports/report" %>
          <% end %>
          <%= link_to "Edit Report", edit_task_report_path(@task, @report), class: "btn btn-secondary bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md" %>
          <br>
          <%= link_to "Destroy Report", task_report_path(@task, @report), data: { 'turbo-method': :delete }, class: "btn btn-secondary bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-md" %>
        <% else %>
          <%= turbo_frame_tag "report" do %>
            <%= render "reports/form", report: @task.create_report %>
          <% end %>
        <% end %>
      </div>
    </div>
  </div>
</main>
