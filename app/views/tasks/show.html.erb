<main class="container mx-auto mt-4">
  <%= link_to sanitize("&larr; Back to tasks"), tasks_path, class: "text-blue-500 mb-4 block" %>
  <div class="bg-blue-100 p-4 rounded-lg shadow-md">
    <div class="header mb-4">
      <h1 class="text-3xl font-bold mb-2"><%= @task.title %></h1>
      <span>Project: <%= link_to @task.project.title, project_path(@task.project), class: "text-blue-500 font-semibold text-xl mb-2 inline-block" %></span>
      <p class="text-gray-700 mb-4">Description: <%= @task.description %></p>
      <p class="text-gray-700 mb-4">Status: <%= @task.status %></p>
      <div class="flex flex-row space-x-2 mb-2">
      <% Task.statuses.each_key do |name| %>
        <%= button_to name, task_path(@task, task: { status: name }), method: :patch, data: { turbo: "replace" }, class: "btn bg-transparent hover:bg-blue-500 text-blue-700 font-semibold hover:text-white py-2 px-4 border border-blue-500 hover:border-transparent rounded" %>
      <% end %>
        </div>

      <div class="flex flex-col space-x-2">
        <%= link_to "New Report", new_task_report_path(@task), data: { turbo_frame: dom_id(Report.new) }, class: "rounded-full bg-sky-500 hover:bg-sky-700 text-white px-4 py-2 font-semibold transition duration-300 ease-in-out" %>
        <%= turbo_frame_tag Report.new%>

          <%= turbo_frame_tag "reports" do %>
            <%= render @reports, task: @task %>
          <% end %>
      </div>
    </div>
  </div>
</main>
